# Python 类属性与实例属性示意

## 1️⃣ 实例变量示例

```python
class MyClass:
    pass

x = MyClass()  # 创建实例

x.counter = 1  # 动态添加属性

while x.counter < 10:
    x.counter *= 2

print(x.counter)  # 16

del x.counter  # 删除属性
```

- `x.counter = 1` → 动态给实例 x 添加属性 `counter`
- while 循环会修改这个属性：1 → 2 → 4 → 8 → 16
- `del x.counter` → 删除属性，访问会报错
- 属性只属于该实例，其他实例不存在这个属性

## 2️⃣ __init__ 初始化属性

```python
class MyClass:
    def __init__(self, age):
        self.age = age

x = MyClass(8)
y = MyClass(11)
```

- 每个实例独立拥有 `age` 属性
- 删除某个实例属性不会影响其他实例：

```python
del x.age
print(x.age)  # ❌ AttributeError
print(y.age)  # 11 ✅
```

## 3️⃣ 类属性 vs 实例属性

### 类属性
```python
class Dog:
    species = "Canine"  # 类属性
```
- 所有实例共享
- 可通过 `类名.属性` 访问和删除
- 删除类属性影响所有实例

### 实例属性
```python
dog1.age = 7  # 实例属性
```
- 每个实例独立
- 删除只影响该实例

### 动态添加实例属性
```python
dog1.weight = 20  # 只给 dog1 添加
```
- 其他实例没有这个属性
- 可删除：`del dog1.weight`

## 4️⃣ del 操作规则

| 删除对象           | 影响范围                        |
|------------------|-------------------------------|
| `del dog1.species` | 删除实例自身属性（如果有覆盖类属性），其他实例不受影响 |
| `del Dog.species`  | 删除类属性，所有实例无法访问           |

- 实例没有覆盖类属性时，`del 实例.类属性` 不会删除类属性
- 要删除类属性，必须使用 `类名.属性`

## 5️⃣ 示例流程

```python
class Dog:
    species = "Canine"

x = Dog()
y = Dog()

# 访问类属性
print(x.species, y.species)  # Canine Canine

# 实例覆盖类属性
x.species = "Feline"
print(x.species, y.species)  # Feline Canine

# 删除实例属性
del x.species
print(x.species, y.species)  # Canine Canine

# 删除类属性
del Dog.species
print(x.species, y.species)  # ❌ AttributeError
```

## 6️⃣ 属性变化图示

```
Step 0: 类和实例创建
┌─────────────┐
│   Dog       │
│ species="Canine" │  ← 类属性
└─────────────┘
       ▲
       │
┌──────┴───────┐      ┌──────┴───────┐
│     x        │      │     y        │
│  (无实例属性)│      │  (无实例属性)│
└──────────────┘      └──────────────┘

访问:
x.species → 类属性 → "Canine"
y.species → 类属性 → "Canine"

---

Step 1: 实例覆盖类属性
x.species = "Feline"  # 只给 x 添加实例属性

┌─────────────┐
│   Dog       │
│ species="Canine" │
└─────────────┘
       ▲
       │
┌──────┴───────┐      ┌──────┴───────┐
│     x        │      │     y        │
│ species="Feline"│    │  (无实例属性)│
└──────────────┘      └──────────────┘

访问:
x.species → 实例属性 → "Feline"
y.species → 类属性 → "Canine"

---

Step 2: 删除实例属性
del x.species

┌─────────────┐
│   Dog       │
│ species="Canine" │
└─────────────┘
       ▲
       │
┌──────┴───────┐      ┌──────┴───────┐
│     x        │      │     y        │
│  (无实例属性)│      │  (无实例属性)│
└──────────────┘      └──────────────┘

访问:
x.species → 类属性 → "Canine"
y.species → 类属性 → "Canine"

---

Step 3: 删除类属性
del Dog.species

┌─────────────┐
│   Dog       │
│  (无类属性) │
└─────────────┘
       ▲
       │
┌──────┴───────┐      ┌──────┴───────┐
│     x        │      │     y        │
│  (无实例属性)│      │  (无实例属性)│
└──────────────┘      └──────────────┘

访问:
x.species → ❌ AttributeError
y.species → ❌ AttributeError
```

✅ 小结
- 实例属性 → 只属于该实例
- 覆盖类属性 → 实例先用自己的属性
- 删除实例属性 → 回退到类属性
- 删除类属性 → 所有实例都不能访问
- 实例变量在首次赋值时创建
- 方法访问实例变量需使用 `self`

