# Python 异常与 Traceback 流程说明

## 1. Traceback 是什么

Traceback 是 Python 打印的调用栈信息，告诉你：
- 出错代码所在行
- 调用的函数
- 最终异常类型和信息

示例：
```python
Traceback (most recent call last):
  File "test.py", line 5, in <module>
    raise NameError("HiThere")
NameError: HiThere
```
表示在 `test.py` 第 5 行出错，异常类型为 `NameError`。

## 2. 为什么有的例子有 Traceback，有的没有

### 情况 A：没有捕获
```python
raise NameError("HiThere")
```
- 没有 `try-except`，异常一路冒泡到最外层
- Python 解释器自动打印 Traceback

### 情况 B：捕获后处理，不再抛出
```python
try:
    result = read_file("data.txt")
except Exception as e:
    print("主程序捕获到异常：", type(e).__name__, "-", e)
```
- 异常被捕获并处理
- Traceback 不会显示，只打印自己写的内容

### 情况 C：捕获后重新抛出
```python
try:
    raise NameError("HiThere")
except NameError:
    print("捕获到异常，重新抛出")
    raise
```
- 异常在 `except` 内被重新抛出
- 如果上层没有捕获 → Python 打印 Traceback

## 3. 异常流向图（简明版）
```
程序运行
   │
   ▼
执行 try 代码块 / 普通语句
   │
   ├── 没有异常 ──► 正常结束
   │
   └── 发生异常
           │
           ▼
     异常被 except 捕获？
           │
      ┌────┴────┐
      │         │
     是          否
      │          │
      ▼          ▼
  except 处理异常   Python 自动打印 Traceback
      │
      ├── except 内自己 print() 打印信息
      │       ↓
      │     程序继续（无 Traceback）
      │
      └── except 内 raise 再抛
              │
          上层是否有 except 捕获？
              │
        ┌─────┴─────┐
        │           │
       有            没
        │           │
        ▼           ▼
    上层处理        Python 打印 Traceback
    （可继续捕获/消化）  程序终止
```

## 4. 例子对照表
| 情况 | 代码 | Traceback 是否打印 |
|------|------|-----------------|
| 直接 raise | `raise NameError("HiThere")` | ✅ 有 |
| 捕获后打印 | `try: ... except Exception as e: print(e)` | ❌ 没有 |
| 捕获后再抛 | `try: ... except Exception: raise` | ✅ 有，如果上层没捕获 |

## 5. 核心结论
- 没有捕获 → Traceback 自动显示
- 捕获并处理 → Traceback 不显示
- 捕获后再抛 → 如果上层没捕获 → Traceback 出现

