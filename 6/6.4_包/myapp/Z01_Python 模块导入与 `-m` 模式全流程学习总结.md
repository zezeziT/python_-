# ğŸ§  Python æ¨¡å—å¯¼å…¥ä¸ `-m` æ¨¡å¼å…¨æµç¨‹å­¦ä¹ æ€»ç»“

---

## ğŸ“Œ ä¸€ã€èƒŒæ™¯ä¸å¸¸è§é”™è¯¯

ä½ åœ¨ä½¿ç”¨ Python åŒ…ç»“æ„æ—¶ï¼Œé‡åˆ°è¿™äº›é”™è¯¯ï¼š

### âœ… é”™è¯¯ 1ï¼š`SyntaxError: invalid decimal literal`

**ç¤ºä¾‹é”™è¯¯ä»£ç ï¼š**

```python
import 6.4_åŒ….tools.math_utils.py
```

**åŸå› è§£æï¼š**

- åŒ…åä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼ˆ`6.4_åŒ…`ï¼‰
- åŒ…åä¸­ä¸èƒ½åŒ…å«å°æ•°ç‚¹ï¼ˆ`.`ï¼‰ï¼Œä¼šè¢«å½“ä½œæ•°å­—
- `import` åé¢ä¸èƒ½åŠ  `.py` åç¼€

**ä¿®æ­£å»ºè®®ï¼š**

é‡å‘½åä¸ºåˆæ³•æ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚ï¼š

```python
# æ­£ç¡®ç›®å½•å
pkg64/

# æ­£ç¡®å¯¼å…¥æ–¹å¼
from pkg64.tools import math_utils
```

---

### âœ… é”™è¯¯ 2ï¼š`ModuleNotFoundError: No module named 'myapp'`

**ç¤ºä¾‹ç›®å½•ç»“æ„ï¼š**

```
6.4_åŒ…/
â””â”€â”€ myapp/
    â”œâ”€â”€ main.py
    â”œâ”€â”€ tools/
    â”‚   â””â”€â”€ math_utils.py
```

**é”™è¯¯è¿è¡Œæ–¹å¼ï¼š**

```bash
cd 6.4_åŒ…/myapp
py main.py
```

**main.py å†…å®¹ï¼š**

```python
from myapp.tools import math_utils  # âŒ æŠ¥é”™
```

**ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ**

å› ä¸ºä½ åœ¨ `myapp/` ç›®å½•ä¸‹è¿è¡Œï¼ŒPython æŠŠå½“å‰ç›®å½•ä½œä¸ºâ€œé¡¹ç›®æ ¹ç›®å½•â€ï¼Œå®ƒæ ¹æœ¬ä¸çŸ¥é“è¿˜æœ‰ä¸ªå« `myapp` çš„åŒ…ï¼Œæ‰€ä»¥ `import myapp...` ä¼šæŠ¥é”™ã€‚

---

## ğŸ“¦ äºŒã€é¡¹ç›®ç»“æ„æ ‡å‡†å†™æ³•

```text
6.4_åŒ…/
â”œâ”€â”€ myapp/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ helpers.py
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ math_utils.py
â”‚   â””â”€â”€ effects/
â”‚       â””â”€â”€ dummy.py  # æ—  __init__.pyï¼Œæ— æ³•ä½œä¸ºåŒ…å¯¼å…¥
```

---

## âœ… ä¸‰ã€æ¨èçš„è¿è¡Œæ–¹å¼ï¼šä½¿ç”¨æ¨¡å—æ¨¡å¼ `python -m`

```bash
cd 6.4_åŒ…
py -m myapp.main
```

è¿™æ ·ï¼š

- Python æŠŠå½“å‰ç›®å½•å½“æˆâ€œåŒ…æ ¹ç›®å½•â€
- èƒ½è¯†åˆ« `myapp` æ˜¯ä¸ªåŒ…
- å…è®¸ä½ å†™åŒ…å†…å¯¼å…¥ï¼š

```python
from myapp.tools import math_utils
```

---

## ğŸ§  å››ã€ä»€ä¹ˆæ˜¯æ¨¡å—æ–¹å¼è¿è¡Œï¼ˆ`python -m`ï¼‰

> `-m` æ˜¯ Python çš„æ¨¡å—è¿è¡Œæ¨¡å¼ï¼Œä½œç”¨æ˜¯ï¼š
>
> - ä»å½“å‰ç›®å½•ä½œä¸ºâ€œåŒ…æ ¹ç›®å½•â€å¼€å§‹
> - è¿è¡ŒæŸä¸ªåŒ…ä¸‹çš„æ¨¡å—ï¼ˆæ¯”å¦‚ `myapp.main`ï¼‰

---

### ğŸ¯ æ¨¡å—æ¨¡å¼å’Œè„šæœ¬æ¨¡å¼çš„åŒºåˆ«ï¼š

| è¿è¡Œæ–¹å¼ | å‘½ä»¤ | `__name__` å€¼ | æŸ¥æ‰¾æ¨¡å—è·¯å¾„ | æ˜¯å¦æ”¯æŒåŒ…å†…å¯¼å…¥ |
|----------|------|----------------|----------------|------------------|
| è„šæœ¬æ¨¡å¼ | `py main.py` | `__main__` | å½“å‰ç›®å½•å¼€å§‹ | âŒ ä¸æ”¯æŒå±‚çº§åŒ…ç»“æ„ |
| æ¨¡å—æ¨¡å¼ | `py -m myapp.main` | `myapp.main` | æŠŠå½“å‰ç›®å½•ä½œä¸ºåŒ…æ ¹ç›®å½• | âœ… å¯ä½¿ç”¨åŒ…ç»“æ„å¯¼å…¥ |

---

## ğŸ§ª äº”ã€main.py æ­£ç¡®å†™æ³•

```python
from myapp.tools import math_utils

def main():
    print("3 + 4 =", math_utils.add(3, 4))

if __name__ == '__main__':
    main()
```

---

## ğŸ§ª å…­ã€math_utils.py ç¤ºä¾‹

```python
def add(a, b):
    return a + b
```

---

## âš ï¸ ä¸ƒã€å¸¸è§é”™è¯¯å¯¹æ¯”è¡¨

| åœºæ™¯ | æ˜¯å¦æ­£ç¡® | è¯´æ˜ |
|------|-----------|------|
| `cd myapp && py main.py`ï¼Œå†™ `import myapp.tools` | âŒ æŠ¥é”™ï¼Œmyapp æ˜¯å½“å‰ç›®å½•ï¼Œæ— æ³•å†å¯¼å…¥è‡ªå·± |
| `cd 6.4_åŒ… && py -m myapp.main` | âœ… æ­£ç¡®æ–¹å¼ï¼Œæ”¯æŒåŒ…å¯¼å…¥ |
| `py myapp.main.py` | âŒ é”™è¯¯è¯­æ³•ï¼Œ`.py` æ–‡ä»¶åä¸­ä¸èƒ½æœ‰ç‚¹å· |
| `effects/dummy.py` æ²¡æœ‰ `__init__.py` | âŒ æ— æ³•é€šè¿‡ `import myapp.effects.dummy` å¯¼å…¥ |
| ç»™ `effects/` åŠ ä¸Š `__init__.py` | âœ… å¯ä½œä¸ºå­åŒ…æ­£å¸¸å¯¼å…¥ |

---

## ğŸš€ å…«ã€å¦‚ä½•ä¿®å¤ `myapp` æ— æ³•å¯¼å…¥çš„é—®é¢˜ï¼Ÿ

### âœ… æ–¹æ³•ä¸€ï¼šä»åŒ…å¤–ç›®å½•ç”¨æ¨¡å—æ¨¡å¼è¿è¡Œï¼ˆæ¨èï¼‰

```bash
cd 6.4_åŒ…
py -m myapp.main
```

main.py ä¸­å†™ï¼š

```python
from myapp.tools import math_utils
```

### âœ… æ–¹æ³•äºŒï¼šè°ƒè¯•æ—¶ä¸´æ—¶åŠ å…¥è·¯å¾„ï¼ˆä¸æ¨èæ­£å¼ä½¿ç”¨ï¼‰

main.py ä¸­åŠ ï¼š

```python
import sys, os
sys.path.append(os.path.abspath(os.path.dirname(__file__)))
from tools import math_utils
```

---

## ğŸ“ ä¹ã€ç”Ÿæ´»æ¯”å–»ç†è§£æ¨¡å—è¿è¡Œä½ç½®

- **ä½ åœ¨å›¾ä¹¦é¦†å¤–ï¼ˆ6.4_åŒ…ï¼‰è¯´â€œæˆ‘è¦æ‰¾ `myapp.tools.math_utils`â€**ï¼Œå›¾ä¹¦ç®¡ç†å‘˜èƒ½æ‰¾åˆ°ä¹¦æ¶ã€‚
- **ä½ é’»è¿› `myapp/` é‡Œè¯´â€œæˆ‘è¦æ‰¾ `myapp`â€**ï¼Œå›¾ä¹¦ç®¡ç†å‘˜è¯´ï¼šâ€œä½ è‡ªå·±å°±åœ¨ä¹¦æ¶é‡Œï¼Œå“ªæ¥çš„ myapp å•Šï¼Ÿâ€

---

## ğŸ“ åã€å¦‚ä½•å¤„ç† `__init__.py`

- æ²¡æœ‰ `__init__.py` çš„ç›®å½•ä¸ä¼šè¢«å½“ä½œåŒ…
- å¦‚æœä½ è¦é€šè¿‡ `import myapp.effects.dummy` æ–¹å¼å¯¼å…¥ï¼Œå°±å¿…é¡»åŠ ä¸Šï¼š

```text
myapp/
â””â”€â”€ effects/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ dummy.py
```

---

## ğŸ” åä¸€ã€`import` vs `from ... import`

### âœ… ä¸¤ç§æ–¹å¼éƒ½åˆæ³•ï¼š

```python
# æ¨èå†™æ³•ï¼ˆç®€æ´ï¼‰
from myapp.tools import math_utils
math_utils.add(1, 2)

# ä¹Ÿå¯ä»¥å†™å…¨è·¯å¾„
import myapp.tools.math_utils
myapp.tools.math_utils.add(1, 2)
```

---

## ğŸ§­ åäºŒã€æ¨èé¡¹ç›®ç»„ç»‡å»ºè®®

### âœ… ä¸»ç¨‹åºè¿è¡Œå…¥å£
å§‹ç»ˆä½¿ç”¨æ¨¡å—æ–¹å¼è¿è¡Œï¼š

```bash
cd é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚ 6.4_åŒ…ï¼‰
py -m myapp.main
```

### âœ… åŒ…ç»“æ„æ¸…æ™°

```
é¡¹ç›®æ ¹/
â”œâ”€â”€ myapp/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ effects/
â”‚       â””â”€â”€ ...
```

---

## âœ… åä¸‰ã€æ€»ç»“å£è¯€

```
æƒ³ç”¨åŒ…å†…ç»“æ„ï¼Œè¿è¡Œç”¨ -mã€‚
ä»åŒ…å¤–ç›®å½•èµ·ï¼Œå±‚çº§å¯¼å…¥ä¸å‡ºé”™ã€‚
```

---

## âœ… åå››ã€æ¨èå­¦ä¹ è·¯å¾„

1. ç†Ÿæ‚‰ Python åŒ…ç»“æ„å‘½åè§„åˆ™
2. å­¦ä¼šä½¿ç”¨ `__init__.py` æ„å»ºåŒ…
3. å­¦ä¼šåŒºåˆ«â€œæ¨¡å—æ¨¡å¼â€ vs â€œè„šæœ¬æ¨¡å¼â€
4. ç»Ÿä¸€ç”¨ `-m` è¿è¡Œä¸»æ¨¡å—ï¼Œä¿æŒåŒ…ç»“æ„
5. é¿å…ç›´æ¥è¿›å…¥åŒ…å†…éƒ¨è¿è¡Œ py æ–‡ä»¶

---

## âœ… åäº”ã€æµ‹è¯•ä¸å¼€å‘æ¨è

- å•å…ƒæµ‹è¯•å†™åœ¨ `tests/` æˆ– `myapp/tests/`
- æµ‹è¯•ç”¨æ¨¡å—è¿è¡Œï¼š
  
```bash
py -m unittest myapp.tests.test_math_utils
```

- å­æ¨¡å—ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œï¼š

```bash
py -m myapp.tools.math_utils
```

å‰ææ˜¯ä½ å†™äº†ï¼š

```python
if __name__ == '__main__':
    ...
```

---

ä½ å·²ç»æŒæ¡äº† Python é¡¹ç›®æ¨¡å—åŒ–å’Œè¿è¡Œæœºåˆ¶çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œä¸‹ä¸€æ­¥å¯ä»¥ç»ƒä¹ è‡ªå·±æ­ä¸€ä¸ªåŒ…ç»“æ„é¡¹ç›®è¿è¡Œå¹¶æµ‹è¯•æ¨¡å—å¯¼å…¥ã€‚
